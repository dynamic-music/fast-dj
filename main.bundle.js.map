{"version":3,"sources":["/Users/flo/Projects/Code/FAST/fast-dj/src/$_gendir lazy","/Users/flo/Projects/Code/FAST/fast-dj/src/app/api.service.ts","/Users/flo/Projects/Code/FAST/fast-dj/src/app/app.component.css","/Users/flo/Projects/Code/FAST/fast-dj/src/app/app.component.html","/Users/flo/Projects/Code/FAST/fast-dj/src/app/app.component.ts","/Users/flo/Projects/Code/FAST/fast-dj/src/app/app.module.ts","/Users/flo/Projects/Code/FAST/fast-dj/src/app/dev-controls/dev-controls.component.css","/Users/flo/Projects/Code/FAST/fast-dj/src/app/dev-controls/dev-controls.component.html","/Users/flo/Projects/Code/FAST/fast-dj/src/app/dev-controls/dev-controls.component.ts","/Users/flo/Projects/Code/FAST/fast-dj/src/app/feature-extraction.service.ts","/Users/flo/Projects/Code/FAST/fast-dj/src/app/mix/analyzer.ts","/Users/flo/Projects/Code/FAST/fast-dj/src/app/mix/auto-dj.ts","/Users/flo/Projects/Code/FAST/fast-dj/src/app/mix/mix-generator.ts","/Users/flo/Projects/Code/FAST/fast-dj/src/app/types.ts","/Users/flo/Projects/Code/FAST/fast-dj/src/app/util.ts","/Users/flo/Projects/Code/FAST/fast-dj/src/environments/environment.ts","/Users/flo/Projects/Code/FAST/fast-dj/src/main.ts","/Users/flo/Projects/Code/FAST/fast-dj/node_modules/n3/lib ^\\.\\/N3.*$","util (ignored)"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\treturn new Promise(function(resolve, reject) { reject(new Error(\"Cannot find module '\" + req + \"'.\")); });\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"../../../../../src/$$_gendir lazy recursive\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/flo/Projects/Code/FAST/fast-dj/src/$$_gendir lazy\n// module id = ../../../../../src/$$_gendir lazy recursive\n// module chunks = main","import { Injectable } from '@angular/core';\nimport { Transition } from './types';\n\n@Injectable()\nexport class ApiService {\n\n  private API_URL = \"https://fast-dj.herokuapp.com/\";//\"http://localhost:8060/\";\n\n  addTransition(transition: Transition) {\n    //TODO ADD TIME!!!!!!!!!\n    return this.postJsonToApi('transition', transition);\n  }\n\n  getAllTransitions(): Promise<Transition[]> {\n    return this.getJsonFromApi('transitions');\n  }\n\n  private postJsonToApi(path: string, json: {}, params?: {}) {\n    path = this.addParams(path, params);\n    return fetch(this.API_URL+path, {\n      method: 'post',\n      body: JSON.stringify(json),\n      headers: { 'Content-Type': 'application/json' }\n    })\n      .then(r => r.text())\n      //.then(r => {console.log(r); return r})\n      .then(t => JSON.parse(t))\n      .catch(e => console.log(e));\n  }\n\n  private getJsonFromApi(path: string, params?: {}): Promise<any> {\n    path = this.addParams(path, params);\n    return fetch(this.API_URL+path)\n      .then(r => r.text())\n      .then(t => JSON.parse(t))\n      .catch(e => console.log(e));\n  }\n\n  private addParams(path, params?: {}) {\n    if (params) {\n      let paramStrings = Array.from(Object.keys(params))\n        .map(k => k+\"=\"+encodeURIComponent(params[k]));\n      path += '?'+paramStrings.join('&');\n    }\n    return path;\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// /Users/flo/Projects/Code/FAST/fast-dj/src/app/api.service.ts","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".custom-component-drop-zone {\\n  width: 100%;\\n  height: 100%;\\n  font-size: 50px;\\n  font-family: \\\"Comic Sans MS\\\";\\n  text-align: center;\\n}\\n\\n.status-indicator {\\n  width: 100%;\\n  height: 100%;\\n  opacity: 0.9;\\n  overflow: auto;\\n  transition: background-color 0.1s ease-in-out;\\n}\\n\\n.beat {\\n  opacity: 1.0;\\n}\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/flo/Projects/Code/FAST/fast-dj/src/app/app.component.css\n// module id = ../../../../../src/app/app.component.css\n// module chunks = main","module.exports = \"<!--The content below is only a placeholder and can be replaced.-->\\n<div\\n  ng2FileDrop\\n  class=\\\"custom-component-drop-zone\\\"\\n  (ng2FileDropFileAccepted)=\\\"dragFileAccepted($event)\\\"\\n>\\n  <div\\n    [ngClass]=\\\"{beat: state.status.type === 'SPINNING', 'status-indicator': true}\\\"\\n    [style.backgroundColor]=\\\"state.status.colour\\\"\\n  >\\n    <h1>FAST DJ</h1>\\n    <h2>{{state.status.type}}</h2>\\n    <p>{{state.status.message}}</p>\\n    <!--[hidden]=\\\"!transitionDone || ratingDone\\\"-->\\n    <star-rating [hidden]=\\\"!transitionDone || ratingDone\\\"\\n      [rating]=\\\"lastTransitionRating\\\"\\n      (ratingChange)=\\\"lastTransitionRating = $event.rating\\\"\\n      (starClickChange)=\\\"onRatingChange($event)\\\"\\n       labelText=\\\"last transition rating\\\"\\n      size=\\\"large\\\" labelPosition=\\\"bottom\\\" staticColor=\\\"default\\\" starType=\\\"svg\\\">\\n    </star-rating>\\n    <p [hidden]=\\\"!ratingDone\\\">drop more audio</p>\\n    <dj-dev-controls *ngIf=\\\"state.inDevMode\\\">Text to show</dj-dev-controls>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/flo/Projects/Code/FAST/fast-dj/src/app/app.component.html\n// module id = ../../../../../src/app/app.component.html\n// module chunks = main","import { Component, OnInit } from '@angular/core';\nimport { Ng2FileDropAcceptedFile } from 'ng2-file-drop';\nimport { ActivatedRoute } from '@angular/router';\nimport { ApiService } from './api.service';\nimport { FeatureExtractionService } from './feature-extraction.service';\nimport { getGuid } from './util';\nimport { Transition } from './types';\nimport { AutoDj } from './mix/auto-dj';\n\nfunction* createColourCycleIterator(colours: string[]) {\n  let index = 0;\n  const nColours = colours.length;\n  while (true) {\n    yield colours[index = ++index % nColours];\n  }\n}\n\ninterface StatusIndictator {\n  colour: string;\n  message: string;\n  type: string;\n}\n\ninterface AppState {\n  inDevMode: boolean;\n  status: StatusIndictator;\n}\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit  {\n  private cyclicColours: Iterator<string>;\n  private currentState: AppState;\n  private songNames: string[] = [];\n  private lastTransition: Transition;\n  private lastTransitionRating: number = 0;\n  private transitionDone: boolean = false;\n  private ratingDone: boolean = false;\n  private dj: AutoDj;\n\n  private get state(): AppState {\n    return this.currentState;\n  }\n  private set state(newState: AppState) {\n    this.currentState = newState;\n  }\n\n  private set status(type: string) {\n    const status = {\n      ...this.state.status,\n      type\n    };\n    this.state = {\n      ...this.state,\n      status\n    };\n  }\n  private set message(message: string) {\n    const status = {\n      ...this.state.status,\n      colour: this.getNextColour(),\n      message\n    };\n    this.state = {\n      ...this.state,\n      status\n    };\n  }\n\n  constructor(private route: ActivatedRoute,\n      private apiService: ApiService,\n      private extractionService: FeatureExtractionService) {\n    //GlobalVars.LOGGING_ON = true;\n    this.cyclicColours = createColourCycleIterator([\n      '#5bc0eb',\n      '#fde74c',\n      '#9bc53d',\n      '#e55934',\n      '#fa7921'\n    ]);\n    this.state = {\n      inDevMode: false,\n      status: {\n        type: 'INITIALISING',\n        message: 'loading',\n        colour: this.getNextColour()\n      }\n    };\n    this.dj = new AutoDj(null, this.extractionService);\n    this.dj.init().then(() => {\n      this.status =  'READY';\n      this.message = 'drop audio here'\n    });\n  }\n\n  async ngOnInit() {\n    this.route\n    .queryParamMap\n    .map(params => {\n      this.state = {\n        ...this.state,\n        inDevMode: params.has('dev')\n      };\n    })\n    .subscribe();\n\n    (await this.dj.getBeatObservable())\n    .subscribe(b => {\n      this.status = this.state.status.type === \"SPINNING\" ?\n        \"spinning\" : \"SPINNING\";\n    })\n  }\n\n  private async dragFileAccepted(acceptedFile: Ng2FileDropAcceptedFile) {\n    if (this.ratingDone || this.state.status.type === 'READY') {\n      this.transitionDone = false;\n      this.ratingDone = false;\n      this.lastTransitionRating = 0;\n      const url = URL.createObjectURL(acceptedFile.file);\n      this.songNames.push(acceptedFile.file.name);\n      this.message = (\"checking out \"+acceptedFile.file.name).toLowerCase();\n      this.lastTransition = await this.dj.transitionToSong(url);\n      this.message = \"transitioning to \" + acceptedFile.file.name.toLowerCase();\n      console.log(\"duration\", this.lastTransition.duration);\n      //when transition done:\n      setTimeout(() => {\n        this.transitionDone = true;\n        this.message = \"playing \" + acceptedFile.file.name.toLowerCase();\n      }, this.lastTransition.duration*1000 + 1000);\n    }\n  }\n\n  private onRatingChange(event) {\n    if (this.lastTransition) {\n      this.lastTransition.user = getGuid();\n      this.lastTransition.rating = event.rating;\n      this.lastTransition.names = this.songNames.slice(-2);\n      this.apiService.addTransition(this.lastTransition);\n      setTimeout(() => this.ratingDone = true, 2000);\n    }\n  }\n\n  private getNextColour(): string {\n    return this.cyclicColours.next().value;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/flo/Projects/Code/FAST/fast-dj/src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { AppComponent } from './app.component';\nimport { Ng2FileDropModule } from 'ng2-file-drop';\nimport { ApiService } from './api.service';\nimport { FeatureExtractionService } from './feature-extraction.service';\nimport { RouterModule, Routes } from '@angular/router';\nimport { DevControlsComponent } from './dev-controls/dev-controls.component';\nimport { StarRatingModule } from 'angular-star-rating';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    DevControlsComponent\n  ],\n  imports: [\n    BrowserModule,\n    Ng2FileDropModule,\n    RouterModule.forRoot([]),\n    StarRatingModule.forRoot()\n  ],\n  providers: [\n    ApiService,\n    FeatureExtractionService\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// /Users/flo/Projects/Code/FAST/fast-dj/src/app/app.module.ts","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/flo/Projects/Code/FAST/fast-dj/src/app/dev-controls/dev-controls.component.css\n// module id = ../../../../../src/app/dev-controls/dev-controls.component.css\n// module chunks = main","module.exports = \"<p>\\n  dev-controls works!\\n</p>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/flo/Projects/Code/FAST/fast-dj/src/app/dev-controls/dev-controls.component.html\n// module id = ../../../../../src/app/dev-controls/dev-controls.component.html\n// module chunks = main","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'dj-dev-controls',\n  templateUrl: './dev-controls.component.html',\n  styleUrls: ['./dev-controls.component.css']\n})\nexport class DevControlsComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/flo/Projects/Code/FAST/fast-dj/src/app/dev-controls/dev-controls.component.ts","import { Injectable } from '@angular/core';\nimport {\n  OneShotExtractionClient,\n  OneShotExtractionRequest as Request,\n  OneShotExtractionResponse as Response,\n  OneShotExtractionScheme\n} from 'piper-js/one-shot';\nimport { FeatureList } from 'piper-js/core';\nimport { toSeconds } from 'piper-js/time';\nimport createQmWorker from '@extractors/qm';\n\n// this spawns a web worker, which we only want to do once\n// so we instantiate\nconst qmWorker = createQmWorker();\n\nexport interface QmExtractor {\n  key: string,\n  outputId: string\n}\n\nexport interface Value<T> {\n  value: T;\n}\nexport interface Beat {\n  time: Value<number>;\n  label: Value<string>;\n}\nexport interface Key {\n  time: Value<number>;\n  value: number;\n}\n\ninterface AudioData {\n  channels: Float32Array[];\n  sampleRate: number;\n  duration: number;\n}\n\nfunction bufferToAudioData(buffer: AudioBuffer): AudioData {\n  const nChannels = buffer.numberOfChannels;\n  const channels = new Array<Float32Array>(nChannels);\n  for (let i = 0; i < nChannels; ++i) {\n    channels[i] = buffer.getChannelData(i);\n  }\n  return {\n    channels,\n    sampleRate: buffer.sampleRate,\n    duration: buffer.duration\n  };\n}\n\n@Injectable()\nexport class FeatureExtractionService {\n  private client: OneShotExtractionClient;\n\n  constructor() {\n    this.client = new OneShotExtractionClient(\n      qmWorker,\n      OneShotExtractionScheme.REMOTE\n    );\n  }\n\n  extract(request: Request): Promise<Response> {\n    return this.client.collect(request);\n  }\n\n  private extractQmFeature(buffer: AudioBuffer, feature: QmExtractor): Promise<any> {\n    const {channels, sampleRate} = bufferToAudioData(buffer);\n    return this.extract({\n      audioData: channels,\n      audioFormat: {\n        sampleRate,\n        channelCount: channels.length\n      },\n      key: feature.key,\n      outputId: feature.outputId\n    }).then(response => response.features.collected);\n  }\n\n  extractBeats(buffer: AudioBuffer): Promise<Beat[]> {\n    return this.extractQmFeature(buffer, {\n      key: 'qm-vamp-plugins:qm-barbeattracker',\n      outputId: 'beats'\n    }).then(features => features.map(feature => ({\n      time: {value: toSeconds(feature.timestamp)},\n      label: {value: feature.label}\n    })));\n  }\n\n  extractKey(buffer: AudioBuffer): Promise<Key[]> {\n    return this.extractQmFeature(buffer, {\n      key: 'qm-vamp-plugins:qm-keydetector',\n      outputId: 'tonic'\n    }).then(features => features.map(feature => ({\n      time: {value: toSeconds(feature.timestamp)},\n      value: feature.featureValues[0]\n    })));\n  }\n}\n\n\n// WEBPACK FOOTER //\n// /Users/flo/Projects/Code/FAST/fast-dj/src/app/feature-extraction.service.ts","import * as _ from 'lodash';\nimport * as math from 'mathjs';\nimport { DymoStore, uris } from 'dymo-core';\n\nexport interface Pair<T> {\n  first: T,\n  second: T\n}\n\n/* {[0]: 0, [7,5]: 1, [2,10]: 2, [9,3]: 3, [4,8]: 4, [11,1]: 5, [6]: 6} */\nconst TONAL_DISTANCES = {\n  0: 0,\n  1: 5,\n  2: 2,\n  3: 3,\n  4: 4,\n  5: 1,\n  6: 6,\n  7: 1,\n  8: 4,\n  9: 3,\n  10: 2,\n  11: 5\n}\n\nexport class Analyzer {\n\n  private beatsCache: Map<string, number[]> = new Map<string, number[]>();\n  private keysCache: Map<string, number> = new Map<string, number>();\n\n  constructor(private store: DymoStore) {}\n\n  async getAllFeatures(song1: string, song2: string): Promise<number[]> {\n    return [\n      await this.getTempo(song1),\n      await this.getTempo(song2),\n      await this.getTempoRatio(song1, song2),\n      await this.getTempoRatio(song2, song1),\n      await this.getTempoMultiple(song1, song2),\n      await this.getTempoMultiple(song2, song1),\n      await this.getRegularity(song1),\n      await this.getRegularity(song2),\n      await this.getKey(song1),\n      await this.getKey(song2),\n      await this.getKeyDistance(song1, song2)\n    ]\n  }\n\n  getMainSongBody(songUri: string): Pair<number> {\n    return {first:0,second:1};\n  }\n\n  async getKeyDistance(song1Uri: string, song2Uri: string): Promise<number> {\n    let dist = Math.abs(await this.getKey(song1Uri) - await this.getKey(song2Uri));\n    return TONAL_DISTANCES[dist];\n  }\n\n  async getKey(songUri: string): Promise<number> {\n    if (!this.keysCache.has(songUri)) {\n      let key = await this.store.findFeatureValue(songUri, uris.CONTEXT_URI+\"key\");\n      this.keysCache.set(songUri, key.length ? key[0] : key);\n    }\n    return this.keysCache.get(songUri);\n  }\n\n  async getTempo(songUri: string): Promise<number> {\n    const durations = await this.getBeatDurations(songUri);\n    //console.log(\"tempo\", 60/math.mean(durations))\n    return 60/math.mean(durations);\n  }\n\n  async getTempoMultiple(song1Uri: string, song2Uri: string): Promise<number> {\n    const tempoRatio = await this.getTempoRatio(song1Uri, song2Uri);\n    return tempoRatio % 1;\n  }\n\n  async getTempoRatio(song1Uri: string, song2Uri: string): Promise<number> {\n    const tempoRatio = await this.getTempo(song1Uri) / await this.getTempo(song2Uri);\n    //console.log(\"tempo ratio\", tempoRatio);\n    return tempoRatio;\n  }\n\n  async hasRegularBeats(songUri: string): Promise<boolean> {\n    return await this.getRegularity(songUri) < .1;\n  }\n\n  async getRegularity(songUri: string): Promise<number> {\n    const durations = await this.getBeatDurations(songUri);\n    return math.std(durations);\n  }\n\n  async tempoSimilar(song1Uri: string, song2Uri: string): Promise<boolean> {\n    const ratio = await this.getTempoRatio(song1Uri, song2Uri);\n    return this.isSimilar(1, ratio);\n  }\n\n  private isSimilar(n1: number, n2: number): boolean {\n    //TODO MAKE POWER-BASED DISTANCE\n    return Math.abs(n1 - n2) < .1;\n  }\n\n  private async getBeatDurations(songUri: string): Promise<number[]> {\n    if (!this.beatsCache.has(songUri)) {\n      const bars = await this.store.findParts(songUri);\n      const beats = _.flatten(await Promise.all(bars.map(p => this.store.findParts(p))));\n      this.beatsCache.set(songUri, await Promise.all(beats.map(b => this.store.findFeatureValue(b, uris.DURATION_FEATURE))));\n    }\n    return this.beatsCache.get(songUri);\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// /Users/flo/Projects/Code/FAST/fast-dj/src/app/mix/analyzer.ts","import { Observable } from 'rxjs/Observable';\nimport * as _ from 'lodash';\nimport { DymoGenerator, DymoTemplates, DymoManager, GlobalVars, DymoStore, uris, globals } from 'dymo-core';\nimport { MixGenerator } from './mix-generator';\nimport { Transition, TransitionType, DecisionType } from '../types';\nimport { FeatureExtractionService } from '../feature-extraction.service';\nimport { Analyzer } from './analyzer';\nimport * as d from './decision-tree';\n\nexport class AutoDj {\n\n  private store: DymoStore;\n  private analyzer: Analyzer;\n  private dymoGen: DymoGenerator;\n  private mixGen: MixGenerator;\n  private manager: DymoManager;\n  private previousPlayingDymos = [];\n  private previousSongs = [];\n  private isPlaying;\n\n  constructor(private featureApi: string, private extractionService: FeatureExtractionService) {\n    //d;\n    this.manager = new DymoManager(\n      undefined,\n      1,\n      null,\n      null,\n      'https://dynamic-music.github.io/dymo-core/audio/impulse_rev.wav'\n    );\n  }\n\n  init(): Promise<any> {\n    return this.manager.init('https://raw.githubusercontent.com/dynamic-music/dymo-core/master/ontologies/')//'https://dynamic-music.github.io/dymo-core/ontologies/')\n      .then(() => {\n        this.store = this.manager.getStore();\n        this.dymoGen = new DymoGenerator(this.store);\n        this.mixGen = new MixGenerator(this.dymoGen, this.manager);\n        this.analyzer = new Analyzer(this.store);\n      });\n  }\n\n  getBeatObservable(): Observable<any> {\n    return (this.manager.getPlayingDymoUris())\n      .filter(playingDymos => {\n        // TODO identify which track is playing, and associate with a specific colour\n       const nChanged = _.difference(playingDymos, this.previousPlayingDymos).length;\n       this.previousPlayingDymos = playingDymos;\n       return nChanged > 0;\n      });\n  }\n\n  async transitionToSong(audioUri: string): Promise<Transition> {\n    let buffer = await (await this.manager.getAudioBank()).getAudioBuffer(audioUri);\n    let beats = await this.extractionService.extractBeats(buffer);\n    let newSong = await DymoTemplates.createAnnotatedBarAndBeatDymo2(this.dymoGen, audioUri, beats);\n    let keys = await this.extractionService.extractKey(buffer);\n    this.dymoGen.setSummarizingMode(globals.SUMMARY.MODE)\n    await this.dymoGen.addFeature(\"key\", keys, newSong);\n    let oldSong = _.last(this.previousSongs);\n    let transition = await this.internalTransition(newSong);\n    if (this.previousSongs.length > 1) {\n      transition.features = await this.analyzer.getAllFeatures(oldSong, newSong);\n    }\n    return transition;\n  }\n\n  private async internalTransition(newSong: string): Promise<Transition> {\n    await this.manager.loadFromStore(newSong);\n    let transition// = this.defaultTransition(newSong);\n    if (Math.random() > 0.5) {\n      transition = this.randomTransition(newSong);\n    } else {\n      transition = this.startWhicheverTransitionIsBest(newSong);\n    }\n    this.previousSongs.push(newSong);\n    this.keepOnPlaying(this.mixGen.getMixDymo());\n    return transition;\n  }\n\n  private async defaultTransition(newSong: string): Promise<Transition> {\n    let transition = this.getEmptyTransitionObject();\n    transition.decision = DecisionType.Default;\n    if (this.previousSongs.length > 0) {\n      //await this.startWhicheverTransitionIsBest(newSong);\n      //(this.getRandomTransition())(newDymo);\n      transition.type = TransitionType.BeatRepeat;\n      transition.duration = await this.mixGen.beatRepeat(newSong);\n    } else {\n      transition.type = TransitionType.FadeIn;\n      transition.duration = await this.mixGen.startMixWithFadeIn(newSong);\n    }\n    return transition;\n  }\n\n  private async randomTransition(newSong: string): Promise<Transition> {\n    console.log(\"random\")\n    let transition = this.getEmptyTransitionObject();\n    transition.decision = DecisionType.Random;\n    if (this.previousSongs.length > 0) {\n      let random = (this.getRandomTransition())\n      transition.type = random[1];\n      transition.duration = await random[0](newSong);\n    } else {\n      transition.type = TransitionType.FadeIn;\n      transition.duration = await this.mixGen.startMixWithFadeIn(newSong);\n    }\n    return transition;\n  }\n\n  private getEmptyTransitionObject(): Transition {\n    return {\n      date: new Date(Date.now()),\n      user: null,\n      rating: null,\n      names: null,\n      features: null,\n      decision: null,\n      type: null,\n      parameters: null,\n      duration: null\n    }\n  }\n\n  private async startWhicheverTransitionIsBest(newSong: string): Promise<Transition> {\n    console.log(\"tree\")\n    let transition = this.getEmptyTransitionObject();\n    transition.decision = DecisionType.DecisionTree;\n    const previousSong = _.last(this.previousSongs);\n\n    if (this.previousSongs.length == 0) {\n      transition.type = TransitionType.FadeIn;\n      transition.duration = await this.mixGen.startMixWithFadeIn(newSong);\n    } else {\n      //const songBoundaries = this.analyzer.getMainSongBody(newSong);\n      if (await this.analyzer.hasRegularBeats(newSong) && await this.analyzer.hasRegularBeats(previousSong)) {\n        console.log(\"both regular\")\n        if (await this.analyzer.tempoSimilar(newSong, previousSong)) {\n          console.log(\"tempo similar\")\n          //transition using beatmatching and tempo interpolation\n          transition.type = TransitionType.Beatmatch;\n          transition.duration = await this.mixGen.beatmatchCrossfade(newSong);\n        }/* else if (await analyzer.tempoCloseToMultiple(newSong, previousSong)) {\n          console.log(\"tempo multiple\")\n          //TODO this.mixGen.transitionImmediatelyByCrossfadeAndBeatmatchToMultiple(newSong, oldDymo);\n          this.mixGen.transitionImmediatelyByCrossfadeAndBeatmatch(newSong);\n        }*/ else if (await this.analyzer.getKeyDistance(newSong, previousSong) <= 2) {\n          console.log(\"key similar\")\n          if (Math.random() > 0.5) {\n            transition.type = TransitionType.Effects;\n            transition.duration = await this.mixGen.reverbPanDirect(newSong);\n          } else {\n            transition.type = TransitionType.EchoFreeze;\n            transition.duration = await this.mixGen.echoFreeze(newSong);\n          }\n        } else {\n          console.log(\"give up\")\n          if (Math.random() > 0.5) {\n            transition.type = TransitionType.Effects;\n            transition.duration = await this.mixGen.beatRepeat(newSong);\n          } else {\n            transition.type = TransitionType.PowerDown;\n            transition.duration = await this.mixGen.powerDown(newSong);\n          }\n        }\n      } else if (await this.analyzer.getKeyDistance(newSong, previousSong) <= 2) {\n        console.log(\"key similar\")\n        transition.type = TransitionType.EchoFreeze;\n        transition.duration = await this.mixGen.echoFreeze(newSong);\n      } else {\n        console.log(\"give up\")\n        if (Math.random() > 0.5) {\n          transition.type = TransitionType.Effects;\n          transition.duration = await this.mixGen.beatRepeat(newSong);\n        } else {\n          transition.type = TransitionType.PowerDown;\n          transition.duration = await this.mixGen.powerDown(newSong);\n        }\n      }\n    }\n    return transition;\n  }\n\n  private getRandomTransition(): [Function, TransitionType] {\n    let transitions: [Function, TransitionType][] = [\n      [(newDymo: string) => this.mixGen.beatmatchCrossfade(newDymo), TransitionType.Beatmatch],\n      [(newDymo: string) => this.mixGen.echoFreeze(newDymo), TransitionType.EchoFreeze],\n      [(newDymo: string) => this.mixGen.direct(newDymo), TransitionType.Slam],\n      [(newDymo: string) => this.mixGen.beatRepeat(newDymo), TransitionType.BeatRepeat],\n      [(newDymo: string) => this.mixGen.crossfade(newDymo), TransitionType.Crossfade],\n      [(newDymo: string) => this.mixGen.powerDown(newDymo), TransitionType.PowerDown],\n      [(newDymo: string) => this.mixGen.reverbPanDirect(newDymo), TransitionType.Effects]\n    ];\n    return transitions[_.random(transitions.length)];\n  }\n\n  private keepOnPlaying(dymoUri: string) {\n    if (!this.isPlaying) {\n      this.manager.startPlayingUri(dymoUri);\n      this.isPlaying = true;\n    }\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// /Users/flo/Projects/Code/FAST/fast-dj/src/app/mix/auto-dj.ts","import * as _ from 'lodash';\nimport { DymoGenerator, ExpressionGenerator, DymoManager, DymoStore, uris, UIControl } from 'dymo-core';\n\n//export const TRANSITIONS: Map<string,Function> = new Map<string,Function>();\n//TRANSITIONS.set(\"BeatmatchCrossfade\", )\n\nconst TRIGGER_DELAY = 3;\n\nexport class MixGenerator {\n\n  private mixDymoUri: string;\n  private songs: string[] = [];\n  private transitions: string[][] = []; //ARRAY OF CONSTRAINT URIS FOR NOW\n  private store: DymoStore;\n  private expressionGen: ExpressionGenerator;\n  private newUris: string[];\n\n  constructor(private generator: DymoGenerator, private manager: DymoManager) {\n    this.store = generator.getStore();\n    this.expressionGen = new ExpressionGenerator(this.store);\n    this.init();\n  }\n\n  async init() {\n    this.mixDymoUri = await this.generator.addDymo();\n  }\n\n  getMixDymo(): string {\n    return this.mixDymoUri;\n  }\n\n  async startMixWithFadeIn(songUri: string, numBars = 3): Promise<number> {\n    let newSongBars = await this.registerSongAndGetBars(songUri);\n    await this.addPartsToMix(newSongBars);\n    let [duration, uris] = await this.applyFadeIn(newSongBars.slice(0, numBars));\n    await this.loadAndTriggerTransition(...uris);\n    return duration + TRIGGER_DELAY;\n  }\n\n  async direct(songUri: string, offsetBars = 8): Promise<number> {\n    let newSongBars = await this.registerSongAndGetBars(songUri, offsetBars);\n    let currentPos = await this.manager.getPosition(this.mixDymoUri);\n    await this.store.removeParts(this.mixDymoUri, currentPos+1);\n    await this.addPartsToMix(newSongBars);\n    return TRIGGER_DELAY;\n  }\n\n  async beatRepeat(songUri: string, times = 2, offsetBars = 8): Promise<number> {\n    let newSongBars = await this.registerSongAndGetBars(songUri, offsetBars);\n    let currentPos = await this.manager.getPosition(this.mixDymoUri);\n    let oldSongBars = await this.store.removeParts(this.mixDymoUri, currentPos+1);\n    //add reverb to last bar\n    let lastBar = await this.store.findPartAt(this.mixDymoUri, currentPos);\n    let lastBeat = await this.store.findPartAt(lastBar, 3);\n    await this.store.setParameter(lastBeat, uris.REVERB, 0.5);\n    //add silence for first part of bar\n    let lastBarDuration = await this.store.findFeatureValue(oldSongBars[0], uris.DURATION_FEATURE);\n    await this.addSilence(lastBarDuration/2);\n    //beat repeat\n    let firstBarBeats = await this.store.findParts(newSongBars[0]);\n    await this.addPartsToMix(_.fill(Array(times), firstBarBeats[0]));\n    await this.addPartsToMix(newSongBars);\n    return 2 + TRIGGER_DELAY; //just an estimate for now\n  }\n\n  async echoFreeze(songUri: string, numBarsBreak = 1): Promise<number> {\n    let newSongBars = await this.registerSongAndGetBars(songUri);\n    //remove rest of old song\n    let currentPos = await this.manager.getPosition(this.mixDymoUri);\n    await this.store.removeParts(this.mixDymoUri, currentPos+1);\n    //delay out last bar\n    let lastBar = await this.store.findPartAt(this.mixDymoUri, currentPos);\n    await this.store.setParameter(lastBar, uris.DELAY, 1);\n    //add silence for n bars\n    let lastBarDuration = await this.store.findFeatureValue(lastBar, uris.DURATION_FEATURE);\n    await this.addSilence(lastBarDuration*numBarsBreak);\n    //add new song\n    await this.addPartsToMix(newSongBars);\n    return lastBarDuration*(numBarsBreak+1) + TRIGGER_DELAY;\n    //currently delays need to be initialized for this to work\n    //return Promise.all(newSongBars.map(p => this.store.setParameter(p, uris.DELAY, 0)));\n  }\n\n  async reverbPanDirect(songUri: string, numBars = 3, offsetBars = 8): Promise<number> {\n    let newSongBars = await this.registerSongAndGetBars(songUri);\n    //remove rest of old song\n    let currentPos = await this.manager.getPosition(this.mixDymoUri);\n    await this.store.removeParts(this.mixDymoUri, currentPos+numBars);\n    let lastBars = (await this.store.findParts(this.mixDymoUri)).slice(-numBars);\n    //power down last few bars\n    let lastBarDuration = await this.store.findFeatureValue(lastBars[0], uris.DURATION_FEATURE);\n    let effectsDuration = lastBarDuration*numBars;\n    let effectsRamp = await this.generator.addRampControl(0, effectsDuration, 100);\n    let reverb = await this.makeRampConstraint(effectsRamp, lastBars, 'Reverb(d) == r');\n    //add new song\n    await this.addPartsToMix(newSongBars);\n    await this.loadAndTriggerTransition(effectsRamp, reverb);\n    return effectsDuration + TRIGGER_DELAY;\n  }\n\n  async powerDown(songUri: string, numBars = 2, numBarsBreak = 0) {\n    let newSongBars = await this.registerSongAndGetBars(songUri);\n    //remove rest of old song\n    let currentPos = await this.manager.getPosition(this.mixDymoUri);\n    await this.store.removeParts(this.mixDymoUri, currentPos+numBars);\n    let lastBars = (await this.store.findParts(this.mixDymoUri)).slice(-numBars);\n    //power down last few bars\n    let lastBarDuration = await this.store.findFeatureValue(lastBars[0], uris.DURATION_FEATURE);\n    let powerDuration = lastBarDuration*numBars*2;\n    let powerRamp = await this.generator.addRampControl(0, powerDuration, 100);\n    let powerDown = await this.makeRampConstraint(powerRamp, lastBars, 'PlaybackRate(d) == 1-r');\n    let powerDown2 = await this.makeSetsConstraint(\n      [['d',lastBars]], 'DurationRatio(d) == 1/PlaybackRate(d)');\n    //add silence for n bars\n    await this.addSilence(lastBarDuration*numBarsBreak);\n    //add new song\n    await this.addPartsToMix(newSongBars);\n    await this.loadAndTriggerTransition(powerRamp, powerDown, powerDown2);\n    return powerDuration + numBarsBreak + TRIGGER_DELAY;\n  }\n\n  async crossfade(songUri: string, numBars = 4, offsetBars = 8) {\n    let newSongBars = await this.registerSongAndGetBars(songUri, offsetBars);\n    let currentPos = await this.manager.getPosition(this.mixDymoUri);\n    let restOfOldSong = await this.store.removeParts(this.mixDymoUri, currentPos+1);\n    let newSongTrans = newSongBars.slice(0, numBars);\n    let oldSongTrans = await this.applyAlign(restOfOldSong, newSongTrans);\n    await this.addPartsToMix(newSongBars.slice(numBars));\n    let [duration, uris] = await this.applyCrossfade(oldSongTrans, newSongTrans);\n    await this.loadAndTriggerTransition(...uris);\n    return duration + TRIGGER_DELAY;\n  }\n\n  async beatmatchCrossfade(songUri: string, numBars = 4, offsetBars = 8) {\n    let newSongBars = await this.registerSongAndGetBars(songUri, offsetBars);\n    let currentPos = await this.manager.getPosition(this.mixDymoUri);\n    let restOfOldSong = await this.store.removeParts(this.mixDymoUri, currentPos+1);\n    let newSongTrans = newSongBars.slice(0, numBars);\n    let oldSongTrans = await this.applyPairwiseAlign(restOfOldSong, newSongTrans);\n    await this.addPartsToMix(newSongBars.slice(numBars));\n    let [duration, uris1] = await this.applyCrossfade(oldSongTrans, newSongTrans);\n    let uris2 = await this.applyBeatmatch(oldSongTrans, newSongTrans, uris1[0]);\n    await this.loadAndTriggerTransition(...uris1, ...uris2);\n    return duration + TRIGGER_DELAY;\n    /*  .then(async () => {\n        console.log(\"triples\", await this.store.size());\n        console.log(\"observers\", await this.store.getValueObserverCount());\n      });*/\n  }\n\n  async addPartsToMix(parts: string[]) {\n    return Promise.all(parts.map(p => this.store.addPart(this.mixDymoUri, p)));\n  }\n\n  async addSilence(duration: number) {\n    if (duration > 0) {\n      let silence = await this.generator.addDymo();\n      await this.store.setFeature(silence, uris.DURATION_FEATURE, duration);\n      await this.addPartsToMix([silence]);\n    }\n  }\n\n  //returns uris of parts of old song that are part of transition\n  async applyAlign(restOfOldSong: string[], newSongTransitionBars: string[]): Promise<string[]> {\n    //only keep the bars needed for the transition\n    //TODO MAKE DURATION DEPENDENT ON NEW SONG!!!!\n    let oldSongBars = restOfOldSong.slice(0, newSongTransitionBars.length);\n    let oldSongSeq = await this.generator.addDymo(null, null, uris.SEQUENCE);\n    await Promise.all(oldSongBars.map(p => this.store.addPart(oldSongSeq, p)));\n    let newSongSeq = await this.generator.addDymo(null, null, uris.SEQUENCE);\n    await Promise.all(newSongTransitionBars.map(p => this.store.addPart(newSongSeq, p)));\n    await this.generator.addConjunction(this.mixDymoUri, [oldSongSeq, newSongSeq]);\n    return oldSongBars;\n  }\n\n  async applyPairwiseAlign(restOfOldSong: string[], newSongTransitionBars: string[]) {\n    let oldSongBars = restOfOldSong.slice(0, newSongTransitionBars.length);\n    let barPairs = _.zip(oldSongBars, newSongTransitionBars);\n    barPairs.forEach(bp => this.generator.addConjunction(this.mixDymoUri, bp));\n    return oldSongBars;\n  }\n\n  async applyBeatmatch(oldSongBars: string[], newSongBars: string[], rampUri: string) {\n    //create tempo transition\n    let tempoParam = await this.generator.addCustomParameter(uris.CONTEXT_URI+\"Tempo\");\n    let newTempo = await this.getTempoFromBars(newSongBars);\n    let oldTempo = await this.getTempoFromBars(oldSongBars);\n    let tempoTransition = await this.makeSetsConstraint(\n      [['t',[tempoParam]], ['r',[rampUri]]], 't == r*'+newTempo+'+(1-r)*'+oldTempo);\n    //create beatmatch\n    let beats = _.flatten(await Promise.all(oldSongBars.concat(newSongBars).map(p => this.store.findParts(p))));\n    let beatMatch = await this.makeSetsConstraint(\n      [['d',beats], ['t',[tempoParam]]], 'PlaybackRate(d) == t/60*DurationFeature(d)');\n    let beatMatch2 = await this.makeSetsConstraint(\n      [['d',beats]], 'DurationRatio(d) == 1/PlaybackRate(d)');\n    console.log(\"beatmatched between tempos\", oldTempo, newTempo);\n    return [tempoTransition, beatMatch, beatMatch2];\n  }\n\n  async applyFadeIn(newSongBarsParts: string[]): Promise<[number, string[]]> {\n    let fadeDuration = await this.getTotalDuration(newSongBarsParts);\n    let fadeRamp = await this.generator.addRampControl(0, fadeDuration, 100);\n    let fadeIn = await this.makeRampConstraint(fadeRamp, newSongBarsParts, 'Amplitude(d) == r');\n    console.log(\"fading in for\", newSongBarsParts.length, \"bars (\"+fadeDuration+\" seconds)\")\n    return [fadeDuration, [fadeRamp, fadeIn]]\n  }\n\n  async applyCrossfade(oldSongParts: string[], newSongParts: string[]): Promise<[number, string[]]> {\n    //this duration calculation works even for tempointerpolated beatmatch!\n    let fadeDuration = (await this.getTotalDuration(oldSongParts.concat(newSongParts))/2);\n    let fadeRamp = await this.generator.addRampControl(0, fadeDuration, 100);\n    let fadeIn = await this.makeRampConstraint(fadeRamp, newSongParts, 'Amplitude(d) == r');\n    let fadeOut = await this.makeRampConstraint(fadeRamp, oldSongParts, 'Amplitude(d) == 1-r');\n    console.log(\"crossfading in for\", newSongParts.length, \"bars (\", fadeDuration, \"seconds)\");\n    return [fadeDuration, [fadeRamp, fadeIn, fadeOut]];\n  }\n\n  //TODO dymo-core throws the occasional error due to list editing concurrency problem\n  async addRandomBeatToLoop(songUri: string, loopDuration = 2): Promise<any> {\n    let currentBeats = await this.store.findParts(this.mixDymoUri);\n    //find a random beat in the song\n    let bars = await this.registerSongAndGetBars(songUri);\n    let randomBar = bars[_.random(bars.length)];\n    let randomBeat = (await this.store.findParts(randomBar))[_.random(4)];\n    if (currentBeats.length == 0) {\n      //add silence at beginning and end of loop to ensure constant length :/\n      let silenceUri = await this.generator.addDymo(this.mixDymoUri);\n      await this.store.setParameter(silenceUri, uris.ONSET, 0);\n      silenceUri = await this.generator.addDymo(this.mixDymoUri);\n      await this.store.setParameter(silenceUri, uris.ONSET, loopDuration);\n      currentBeats = await this.store.findParts(this.mixDymoUri);\n    }\n    //set a random onset and add the beat to the loop at correct position\n    let currentOnsets = await Promise.all(currentBeats.map(b => this.store.findParameterValue(b, uris.ONSET)));\n    let randomOnset = _.random(loopDuration, true);\n    await this.store.setParameter(randomBeat, uris.ONSET, randomOnset);\n    let beatPosition = currentOnsets.filter(o => o < randomOnset).length;\n    return this.store.insertPartAt(this.mixDymoUri, randomBeat, beatPosition);\n  }\n\n  async transitionImmediatelyToRandomBars(songUri: string, numBars = 2): Promise<any> {\n    let bars = await this.registerSongAndGetBars(songUri);\n    let randomBar = _.random(bars.length-numBars);\n    return Promise.all(bars.slice(randomBar, randomBar+numBars).map(p =>\n      this.store.addPart(this.mixDymoUri, p)));\n  }\n\n  /**returns a number of controls that trigger the transition*/\n  private loadAndTriggerTransition(...uris: string[]): Promise<any> {\n    return this.manager.loadFromStore(...uris)\n      .then(l => {\n        //add loaded transition\n        this.transitions.push(l.constraintUris);\n        //return controls\n        return _.values(l.controls);\n      })\n      .then(controls => {\n        //TODO LET SCHEDULER DO THIS!!!!\n        setTimeout(() => {\n          //stop previous transition\n          if (this.transitions.length > 1)\n            this.store.deactivateConstraints(this.transitions.slice(-2)[0]);\n          //start new transition\n          controls.forEach((c:any) => c.startUpdate ? c.startUpdate() : null);\n        }, TRIGGER_DELAY*1000); //arbitrary time TODO REMOVE ONCE DONE WITH EVENTS!!!\n      })\n  }\n\n  private async registerSongAndGetBars(songUri: string, offset = 0): Promise<string[]> {\n    this.songs.push(songUri);\n    let bars = await this.store.findParts(songUri);\n    return bars.slice(offset);\n  }\n\n  private async makeCrossfade(rampUri: string, oldSongUris: string[], newSongUris: string[]): Promise<string[]> {\n    var fadeOut = await this.makeRampConstraint(rampUri, oldSongUris, 'Amplitude(d) == 1-r');\n    var fadeIn = await this.makeRampConstraint(rampUri, newSongUris, 'Amplitude(d) == r');\n    /*var fadeOut2 = await this.makeRampConstraint(rampUri, oldSongUris, 'DurationRatio(d) == 1/(1-r)');\n    var fadeIn2 = await this.makeRampConstraint(rampUri, newSongUris, 'DurationRatio(d) == 1/r');*/\n    return [fadeOut, fadeIn].filter(c => c); //remove undefined\n  }\n\n  private makeRampConstraint(rampUri: string, dymoUris: string[], expression: string): Promise<string> {\n    if (dymoUris.length > 0) {\n      return this.makeSetsConstraint([['d',dymoUris], ['r',[rampUri]]], expression);\n    }\n  }\n\n  private makeSetsConstraint(sets: [string,string[]][], expression: string): Promise<string> {\n    let vars = sets.map(s => '∀ '+s[0]+' in '+JSON.stringify(s[1])+' => ').join('');\n    return this.expressionGen.addConstraint(this.mixDymoUri, vars+expression, true);\n  }\n\n  private async getTempoFromBars(barUris: string[]): Promise<number> {\n    let avgDuration = _.mean(await this.getFeature(barUris, uris.DURATION_FEATURE));\n    return 60/(avgDuration/4);\n  }\n\n  private async getTotalDuration(dymoUris: string[]): Promise<number> {\n    return _.sum(await this.getFeature(dymoUris, uris.DURATION_FEATURE));\n  }\n\n  private async getFeature(dymoUris: string[], featureUri: string): Promise<number[]> {\n    return Promise.all(dymoUris.map(d => this.store.findFeatureValue(d, featureUri)));\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// /Users/flo/Projects/Code/FAST/fast-dj/src/app/mix/mix-generator.ts","export enum DecisionType {\n  Default,\n  Random,\n  DecisionTree\n}\n\nexport enum TransitionType {\n  FadeIn,\n  Slam,\n  BeatRepeat,\n  Crossfade,\n  Beatmatch,\n  BeatmatchMultiple,\n  EchoFreeze,\n  PowerDown,\n  Effects\n}\n\nexport interface Transition {\n  date: Date,\n  user: string,\n  rating: number,\n  names: string[],\n  features: number[],\n  type: TransitionType,\n  decision: DecisionType,\n  parameters: number[],\n  duration: number\n}\n\n\n// WEBPACK FOOTER //\n// /Users/flo/Projects/Code/FAST/fast-dj/src/app/types.ts","/**\n * @function _guid\n * @description Creates GUID for user based on several different browser variables\n * It will never be RFC4122 compliant but it is robust\n * @returns {Number}\n * @private\n */\nexport function getGuid() {\n\n    var nav = window.navigator;\n    var screen = window.screen;\n    var guid: string = nav.mimeTypes.length.toString();\n    guid += nav.userAgent.replace(/\\D+/g, '');\n    guid += nav.plugins.length;\n    guid += screen.height || '';\n    guid += screen.width || '';\n    guid += screen.pixelDepth || '';\n\n    return guid;\n};\n\n\n// WEBPACK FOOTER //\n// /Users/flo/Projects/Code/FAST/fast-dj/src/app/util.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// /Users/flo/Projects/Code/FAST/fast-dj/src/environments/environment.ts","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// /Users/flo/Projects/Code/FAST/fast-dj/src/main.ts","var map = {\n\t\"./N3Lexer\": \"../../../../n3/lib/N3Lexer.js\",\n\t\"./N3Lexer.js\": \"../../../../n3/lib/N3Lexer.js\",\n\t\"./N3Parser\": \"../../../../n3/lib/N3Parser.js\",\n\t\"./N3Parser.js\": \"../../../../n3/lib/N3Parser.js\",\n\t\"./N3Store\": \"../../../../n3/lib/N3Store.js\",\n\t\"./N3Store.js\": \"../../../../n3/lib/N3Store.js\",\n\t\"./N3StreamParser\": \"../../../../n3/lib/N3StreamParser.js\",\n\t\"./N3StreamParser.js\": \"../../../../n3/lib/N3StreamParser.js\",\n\t\"./N3StreamWriter\": \"../../../../n3/lib/N3StreamWriter.js\",\n\t\"./N3StreamWriter.js\": \"../../../../n3/lib/N3StreamWriter.js\",\n\t\"./N3Util\": \"../../../../n3/lib/N3Util.js\",\n\t\"./N3Util.js\": \"../../../../n3/lib/N3Util.js\",\n\t\"./N3Writer\": \"../../../../n3/lib/N3Writer.js\",\n\t\"./N3Writer.js\": \"../../../../n3/lib/N3Writer.js\"\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"../../../../n3/lib recursive ^\\\\.\\\\/N3.*$\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/flo/Projects/Code/FAST/fast-dj/node_modules/n3/lib ^\\.\\/N3.*$\n// module id = ../../../../n3/lib recursive ^\\.\\/N3.*$\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// util (ignored)\n// module id = 1\n// module chunks = main"],"sourceRoot":"webpack:///"}